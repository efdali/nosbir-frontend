{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Post from \"./post\";\nimport Loading from \"./loading\";\nimport Error from \"./error\";\nimport { connect } from \"react-redux\";\nimport { fetchPosts } from \"../store/actions/postActions\";\n\nvar PostList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(PostList, _React$Component);\n\n  function PostList(props) {\n    var _this;\n\n    _classCallCheck(this, PostList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PostList).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"onScrollHandle\", function (e) {\n      // inner görünen alan\n      // scrollTop ne kadar aşağıda olduğu\n      // offsetHeight sayfanın toplam yüksekliği\n      var _this$props = _this.props,\n          total = _this$props.total,\n          group = _this$props.group,\n          fetchPosts = _this$props.fetchPosts;\n\n      if (_this.state.page < total - 1) {\n        if (window.innerHeight + document.documentElement.scrollTop + 200 >= document.documentElement.offsetHeight) {\n          _this.setState(function (oldState) {\n            return {\n              page: oldState.page + 1\n            };\n          }, function () {\n            fetchPosts(group, _this.state.page);\n          });\n        }\n      } else window.removeEventListener(\"scroll\", _this.onScrollHandle);\n    });\n\n    _this.state = {\n      page: 0\n    };\n    return _this;\n  }\n\n  _createClass(PostList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //if (this.props.posts <= 0)\n      //this.props.fetchPosts(this.props.group, this.state.page);\n      window.addEventListener(\"scroll\", this.onScrollHandle);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(scroll, this.onScrollHandle);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          posts = _this$props2.posts,\n          isLoading = _this$props2.isLoading,\n          isRejected = _this$props2.isRejected,\n          msg = _this$props2.msg,\n          total = _this$props2.total;\n      if (isLoading) return __jsx(Loading, null);else if (isRejected) return __jsx(Error, {\n        msg: msg\n      });else if (!posts.length) return __jsx(Error, {\n        msg: \"Post Bulunamad\\u0131.\"\n      });\n      return __jsx(\"div\", {\n        className: \"post-list\"\n      }, posts.map(function (p, i) {\n        return __jsx(Post, {\n          post: p,\n          key: i\n        });\n      }), this.state.page !== 0 && this.state.page >= total - 1 ? __jsx(Error, {\n        msg: \"B\\xFCt\\xFCn postlar bu kadard\\u0131.Hepsini g\\xF6rd\\xFCn.\"\n      }) : \"\");\n    }\n  }]);\n\n  return PostList;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(_ref) {\n  var posts = _ref.posts;\n  return {\n    posts: posts.posts,\n    isLoading: posts.post_loading,\n    isRejected: posts.post_reject,\n    msg: posts.post_error_msg,\n    total: posts.total\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchPosts: fetchPosts\n})(PostList);","map":{"version":3,"sources":["E:/projects/nosbir-frontend/components/postList.js"],"names":["React","Post","Loading","Error","connect","fetchPosts","PostList","props","e","total","group","state","page","window","innerHeight","document","documentElement","scrollTop","offsetHeight","setState","oldState","removeEventListener","onScrollHandle","addEventListener","scroll","posts","isLoading","isRejected","msg","length","map","p","i","Component","mapStateToProps","post_loading","post_reject","post_error_msg"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Post from \"./post\";\r\nimport Loading from \"./loading\";\r\nimport Error from \"./error\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchPosts } from \"../store/actions/postActions\";\r\nclass PostList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      page: 0\r\n    };\r\n  }\r\n\r\n  onScrollHandle = e => {\r\n    // inner görünen alan\r\n    // scrollTop ne kadar aşağıda olduğu\r\n    // offsetHeight sayfanın toplam yüksekliği\r\n    const { total, group, fetchPosts } = this.props;\r\n    if (this.state.page < total - 1) {\r\n      if (\r\n        window.innerHeight + document.documentElement.scrollTop + 200 >=\r\n        document.documentElement.offsetHeight\r\n      ) {\r\n        this.setState(\r\n          oldState => ({\r\n            page: oldState.page + 1\r\n          }),\r\n          () => {\r\n            fetchPosts(group, this.state.page);\r\n          }\r\n        );\r\n      }\r\n    } else window.removeEventListener(\"scroll\", this.onScrollHandle);\r\n  };\r\n  componentDidMount() {\r\n    //if (this.props.posts <= 0)\r\n      //this.props.fetchPosts(this.props.group, this.state.page);\r\n\r\n    window.addEventListener(\"scroll\", this.onScrollHandle);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(scroll, this.onScrollHandle);\r\n  }\r\n\r\n  render() {\r\n    const { posts, isLoading, isRejected, msg, total } = this.props;\r\n\r\n    if (isLoading) return <Loading />;\r\n    else if (isRejected) return <Error msg={msg} />;\r\n    else if (!posts.length) return <Error msg=\"Post Bulunamadı.\" />;\r\n\r\n    return (\r\n      <div className=\"post-list\">\r\n        {posts.map((p, i) => (\r\n          <Post post={p} key={i} />\r\n        ))}\r\n        {this.state.page !== 0 && this.state.page >= total - 1 ? (\r\n          <Error msg=\"Bütün postlar bu kadardı.Hepsini gördün.\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = ({ posts }) => ({\r\n  posts: posts.posts,\r\n  isLoading: posts.post_loading,\r\n  isRejected: posts.post_reject,\r\n  msg: posts.post_error_msg,\r\n  total: posts.total\r\n});\r\nexport default connect(mapStateToProps, { fetchPosts })(PostList);\r\n"]},"metadata":{},"sourceType":"module"}