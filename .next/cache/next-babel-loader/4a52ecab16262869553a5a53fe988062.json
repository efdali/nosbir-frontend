{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Post from \"./post\";\nimport Loading from \"./loading\";\nimport Error from \"./error\";\nimport { connect } from \"react-redux\";\nimport { fetchPosts } from \"../store/actions/postActions\";\n\nclass PostList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"onScrollHandle\", e => {\n      // inner görünen alan\n      // scrollTop ne kadar aşağıda olduğu\n      // offsetHeight sayfanın toplam yüksekliği\n      const {\n        total,\n        group,\n        fetchPosts\n      } = this.props;\n\n      if (this.state.page < total - 1) {\n        if (window.innerHeight + document.documentElement.scrollTop + 200 >= document.documentElement.offsetHeight) {\n          this.setState(oldState => ({\n            page: oldState.page + 1\n          }), () => {\n            fetchPosts(group, this.state.page);\n          });\n        }\n      } else window.removeEventListener(\"scroll\", this.onScrollHandle);\n    });\n\n    this.state = {\n      page: 0\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.posts.length <= 0) {\n      console.log(\"küçük\");\n      this.props.fetchPosts(this.props.group, this.state.page);\n    }\n\n    window.addEventListener(\"scroll\", this.onScrollHandle);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(scroll, this.onScrollHandle);\n  }\n\n  render() {\n    const {\n      posts,\n      isLoading,\n      isRejected,\n      msg,\n      total\n    } = this.props;\n    if (isLoading) return __jsx(Loading, null);else if (isRejected) return __jsx(Error, {\n      msg: msg\n    });else if (!posts.length) return __jsx(Error, {\n      msg: \"Post Bulunamad\\u0131.\"\n    });\n    return __jsx(\"div\", {\n      className: \"post-list\"\n    }, posts.map((p, i) => __jsx(Post, {\n      post: p,\n      key: i\n    })), this.state.page !== 0 && this.state.page >= total - 1 ? __jsx(Error, {\n      msg: \"B\\xFCt\\xFCn postlar bu kadard\\u0131.Hepsini g\\xF6rd\\xFCn.\"\n    }) : \"\");\n  }\n\n}\n\nconst mapStateToProps = ({\n  posts\n}) => ({\n  posts: posts.posts,\n  isLoading: posts.post_loading,\n  isRejected: posts.post_reject,\n  msg: posts.post_error_msg,\n  total: posts.total\n});\n\nexport default connect(mapStateToProps, {\n  fetchPosts\n})(PostList);","map":{"version":3,"sources":["E:/projects/nosbir-frontend/components/postList.js"],"names":["React","Post","Loading","Error","connect","fetchPosts","PostList","Component","constructor","props","e","total","group","state","page","window","innerHeight","document","documentElement","scrollTop","offsetHeight","setState","oldState","removeEventListener","onScrollHandle","componentDidMount","posts","length","console","log","addEventListener","componentWillUnmount","scroll","render","isLoading","isRejected","msg","map","p","i","mapStateToProps","post_loading","post_reject","post_error_msg"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,QAA2B,8BAA3B;;AACA,MAAMC,QAAN,SAAuBN,KAAK,CAACO,SAA7B,CAAuC;AACrCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,4CAOFC,CAAC,IAAI;AACpB;AACA;AACA;AACA,YAAM;AAAEC,QAAAA,KAAF;AAASC,QAAAA,KAAT;AAAgBP,QAAAA;AAAhB,UAA+B,KAAKI,KAA1C;;AACA,UAAI,KAAKI,KAAL,CAAWC,IAAX,GAAkBH,KAAK,GAAG,CAA9B,EAAiC;AAC/B,YACEI,MAAM,CAACC,WAAP,GAAqBC,QAAQ,CAACC,eAAT,CAAyBC,SAA9C,GAA0D,GAA1D,IACAF,QAAQ,CAACC,eAAT,CAAyBE,YAF3B,EAGE;AACA,eAAKC,QAAL,CACEC,QAAQ,KAAK;AACXR,YAAAA,IAAI,EAAEQ,QAAQ,CAACR,IAAT,GAAgB;AADX,WAAL,CADV,EAIE,MAAM;AACJT,YAAAA,UAAU,CAACO,KAAD,EAAQ,KAAKC,KAAL,CAAWC,IAAnB,CAAV;AACD,WANH;AAQD;AACF,OAdD,MAcOC,MAAM,CAACQ,mBAAP,CAA2B,QAA3B,EAAqC,KAAKC,cAA1C;AACR,KA3BkB;;AAEjB,SAAKX,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE;AADK,KAAb;AAGD;;AAuBDW,EAAAA,iBAAiB,GAAG;AAClB,QAAI,KAAKhB,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,IAA2B,CAA/B,EAAiC;AACjCC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACE,WAAKpB,KAAL,CAAWJ,UAAX,CAAsB,KAAKI,KAAL,CAAWG,KAAjC,EAAwC,KAAKC,KAAL,CAAWC,IAAnD;AAA0D;;AAE5DC,IAAAA,MAAM,CAACe,gBAAP,CAAwB,QAAxB,EAAkC,KAAKN,cAAvC;AACD;;AACDO,EAAAA,oBAAoB,GAAG;AACrBhB,IAAAA,MAAM,CAACQ,mBAAP,CAA2BS,MAA3B,EAAmC,KAAKR,cAAxC;AACD;;AAEDS,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEP,MAAAA,KAAF;AAASQ,MAAAA,SAAT;AAAoBC,MAAAA,UAApB;AAAgCC,MAAAA,GAAhC;AAAqCzB,MAAAA;AAArC,QAA+C,KAAKF,KAA1D;AAEA,QAAIyB,SAAJ,EAAe,OAAO,MAAC,OAAD,OAAP,CAAf,KACK,IAAIC,UAAJ,EAAgB,OAAO,MAAC,KAAD;AAAO,MAAA,GAAG,EAAEC;AAAZ,MAAP,CAAhB,KACA,IAAI,CAACV,KAAK,CAACC,MAAX,EAAmB,OAAO,MAAC,KAAD;AAAO,MAAA,GAAG,EAAC;AAAX,MAAP;AAExB,WACE;AAAK,MAAA,SAAS,EAAC;AAAf,OACGD,KAAK,CAACW,GAAN,CAAU,CAACC,CAAD,EAAIC,CAAJ,KACT,MAAC,IAAD;AAAM,MAAA,IAAI,EAAED,CAAZ;AAAe,MAAA,GAAG,EAAEC;AAApB,MADD,CADH,EAIG,KAAK1B,KAAL,CAAWC,IAAX,KAAoB,CAApB,IAAyB,KAAKD,KAAL,CAAWC,IAAX,IAAmBH,KAAK,GAAG,CAApD,GACC,MAAC,KAAD;AAAO,MAAA,GAAG,EAAC;AAAX,MADD,GAGC,EAPJ,CADF;AAYD;;AA3DoC;;AA6DvC,MAAM6B,eAAe,GAAG,CAAC;AAAEd,EAAAA;AAAF,CAAD,MAAgB;AACtCA,EAAAA,KAAK,EAAEA,KAAK,CAACA,KADyB;AAEtCQ,EAAAA,SAAS,EAAER,KAAK,CAACe,YAFqB;AAGtCN,EAAAA,UAAU,EAAET,KAAK,CAACgB,WAHoB;AAItCN,EAAAA,GAAG,EAAEV,KAAK,CAACiB,cAJ2B;AAKtChC,EAAAA,KAAK,EAAEe,KAAK,CAACf;AALyB,CAAhB,CAAxB;;AAOA,eAAeP,OAAO,CAACoC,eAAD,EAAkB;AAAEnC,EAAAA;AAAF,CAAlB,CAAP,CAAyCC,QAAzC,CAAf","sourcesContent":["import React from \"react\";\r\nimport Post from \"./post\";\r\nimport Loading from \"./loading\";\r\nimport Error from \"./error\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchPosts } from \"../store/actions/postActions\";\r\nclass PostList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      page: 0\r\n    };\r\n  }\r\n\r\n  onScrollHandle = e => {\r\n    // inner görünen alan\r\n    // scrollTop ne kadar aşağıda olduğu\r\n    // offsetHeight sayfanın toplam yüksekliği\r\n    const { total, group, fetchPosts } = this.props;\r\n    if (this.state.page < total - 1) {\r\n      if (\r\n        window.innerHeight + document.documentElement.scrollTop + 200 >=\r\n        document.documentElement.offsetHeight\r\n      ) {\r\n        this.setState(\r\n          oldState => ({\r\n            page: oldState.page + 1\r\n          }),\r\n          () => {\r\n            fetchPosts(group, this.state.page);\r\n          }\r\n        );\r\n      }\r\n    } else window.removeEventListener(\"scroll\", this.onScrollHandle);\r\n  };\r\n  componentDidMount() {\r\n    if (this.props.posts.length <= 0){\r\n    console.log(\"küçük\");\r\n      this.props.fetchPosts(this.props.group, this.state.page);}\r\n\r\n    window.addEventListener(\"scroll\", this.onScrollHandle);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(scroll, this.onScrollHandle);\r\n  }\r\n\r\n  render() {\r\n    const { posts, isLoading, isRejected, msg, total } = this.props;\r\n\r\n    if (isLoading) return <Loading />;\r\n    else if (isRejected) return <Error msg={msg} />;\r\n    else if (!posts.length) return <Error msg=\"Post Bulunamadı.\" />;\r\n\r\n    return (\r\n      <div className=\"post-list\">\r\n        {posts.map((p, i) => (\r\n          <Post post={p} key={i} />\r\n        ))}\r\n        {this.state.page !== 0 && this.state.page >= total - 1 ? (\r\n          <Error msg=\"Bütün postlar bu kadardı.Hepsini gördün.\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = ({ posts }) => ({\r\n  posts: posts.posts,\r\n  isLoading: posts.post_loading,\r\n  isRejected: posts.post_reject,\r\n  msg: posts.post_error_msg,\r\n  total: posts.total\r\n});\r\nexport default connect(mapStateToProps, { fetchPosts })(PostList);\r\n"]},"metadata":{},"sourceType":"module"}