{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport Link from 'next/link';\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport http from \"../utils/http\";\nimport Loading from \"./loading\";\n\nconst Vote = props => {\n  const {\n    isAuthenticated\n  } = useSelector(state => state.auth);\n  const {\n    0: like,\n    1: setLike\n  } = useState(_parseInt(props.likes ? props.likes : 0));\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n\n  function voteHandler(e, type) {\n    e.preventDefault();\n    setLoading(true);\n\n    if (!isAuthenticated) {\n      toast.warn(\"Oylamak için giriş yapmalısınız.\");\n      setLoading(false);\n      return;\n    }\n\n    http.post(\"begeni.php\", {\n      postId: props.postId,\n      tur: type\n    }).then(res => res.data).then(res => {\n      if (res.durum) {\n        if (res.begeni) setLike(begeni);else setLike(like + _parseInt(type));\n      } else toast.error(res.mesaj);\n\n      setLoading(false);\n    }).catch(err => {\n      setLoading(false);\n      toast.error(\"Bir hata oluştu. \" + err);\n    });\n  }\n\n  const Icon = ({\n    type\n  }) => {\n    return __jsx(\"img\", {\n      src: `/vote-${type}${props.white ? \"-white\" : \"\"}-icon.png`,\n      alt: \"post oyla\"\n    });\n  };\n\n  const defaultClass = props.white ? \"default-btn\" : \"\";\n  return __jsx(\"ul\", {\n    className: \"post-actions\"\n  }, __jsx(\"li\", {\n    className: \"post-vote\"\n  }, __jsx(\"button\", {\n    className: defaultClass,\n    onClick: e => voteHandler(e, 1)\n  }, __jsx(Icon, {\n    type: \"up\"\n  })), loading ? __jsx(Loading, null) : __jsx(\"span\", null, like), __jsx(\"button\", {\n    className: defaultClass,\n    onClick: e => voteHandler(e, -1)\n  }, __jsx(Icon, {\n    type: \"down\"\n  }))), __jsx(\"li\", {\n    className: \"post-comment-number\"\n  }, __jsx(\"img\", {\n    src: `/comment${props.white ? `-white` : \"\"}-icon.png`,\n    alt: \"post-yorumlar\\u0131\"\n  }), __jsx(Link, {\n    href: `/nos/${props.seo}`\n  }, __jsx(\"a\", null, props.total ? props.total : 0))));\n};\n\nexport default Vote;","map":{"version":3,"sources":["E:/projects/nosbir-frontend/components/vote.js"],"names":["React","useState","Link","toast","useSelector","http","Loading","Vote","props","isAuthenticated","state","auth","like","setLike","likes","loading","setLoading","voteHandler","e","type","preventDefault","warn","post","postId","tur","then","res","data","durum","begeni","error","mesaj","catch","err","Icon","white","defaultClass","seo","total"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Link from 'next/link';\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport http from \"../utils/http\";\r\nimport Loading from \"./loading\";\r\nconst Vote = props => {\r\n  const { isAuthenticated } = useSelector(state => state.auth);\r\n  const [like, setLike] = useState(parseInt(props.likes ? props.likes : 0));\r\n  const [loading, setLoading] = useState(false);\r\n  function voteHandler(e, type) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    if (!isAuthenticated) {\r\n      toast.warn(\"Oylamak için giriş yapmalısınız.\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    http\r\n      .post(\"begeni.php\", {\r\n        postId: props.postId,\r\n        tur: type\r\n      })\r\n      .then(res => res.data)\r\n      .then(res => {\r\n        if (res.durum) {\r\n          if (res.begeni) setLike(begeni);\r\n          else setLike(like + parseInt(type));\r\n        } else toast.error(res.mesaj);\r\n        setLoading(false);\r\n      })\r\n      .catch(err => {\r\n        setLoading(false);\r\n        toast.error(\"Bir hata oluştu. \" + err);\r\n      });\r\n  }\r\n  const Icon = ({ type }) => {\r\n    return (\r\n      <img\r\n        src={`/vote-${type}${props.white ? \"-white\" : \"\"}-icon.png`}\r\n        alt=\"post oyla\"\r\n      />\r\n    );\r\n  };\r\n  const defaultClass = props.white ? \"default-btn\" : \"\";\r\n  return (\r\n    <ul className=\"post-actions\">\r\n      <li className=\"post-vote\">\r\n        <button className={defaultClass} onClick={e => voteHandler(e, 1)}>\r\n          <Icon type=\"up\" />\r\n        </button>\r\n        {loading ? <Loading /> : <span>{like}</span>}\r\n        <button className={defaultClass} onClick={e => voteHandler(e, -1)}>\r\n          <Icon type=\"down\" />\r\n        </button>\r\n      </li>\r\n      <li className=\"post-comment-number\">\r\n        <img\r\n          src={`/comment${props.white ? `-white` : \"\"}-icon.png`}\r\n          alt=\"post-yorumları\"\r\n        />\r\n        <Link href={`/nos/${props.seo}`}>\r\n          <a>{props.total ? props.total : 0}</a>\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\nexport default Vote;\r\n"]},"metadata":{},"sourceType":"module"}