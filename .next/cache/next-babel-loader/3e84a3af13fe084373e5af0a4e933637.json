{"ast":null,"code":"import { toast } from \"react-toastify\";\nimport cookie from \"js-cookie\";\nimport jwt_decode from \"jwt-decode\";\nimport { setModalVisibility, LOGIN_MODAL } from \"./modalActions\";\nexport var AUTHENTICATE = \"AUTHENTICATE\";\nexport var authenticate = function authenticate(user) {\n  return {\n    type: AUTHENTICATE,\n    user: user\n  };\n};\nexport var DEAUTHENTICATE = \"DEAUTHENTICATE\";\nexport var deauthenticate = function deauthenticate() {\n  return {\n    type: DEAUTHENTICATE\n  };\n};\nexport var login = function login(nick, passwd) {\n  if (!nick || !passwd) return;\n  return function (dispatch, getState, http) {\n    http.post(\"giris.php\", {\n      kadi: nick,\n      sifre: passwd\n    }).then(function (res) {\n      return res.data;\n    }).then(function (res) {\n      console.log(res);\n\n      if (res.durum) {\n        localStorage.setItem(\"token\", res.token);\n        cookie.set(\"token\", res.token, {\n          expires: 1\n        });\n        var data = jwt_decode(res.token);\n        dispatch(authenticate(data.data));\n        dispatch(setModalVisibility(LOGIN_MODAL, false));\n      } else {\n        toast.warn(res.mesaj);\n      }\n    })[\"catch\"](function (err) {\n      return toast.warn(err);\n    });\n  };\n};\nexport var register = function register(nick, passwd, email) {\n  if (!nick || !passwd || !email) return;\n  return function (dispatch, getState, http) {\n    http.post(\"kayit.php\", {\n      kadi: nick,\n      sifre: passwd,\n      eposta: email\n    }).then(function (res) {\n      return res.data;\n    }).then(function (res) {\n      if (res.durum) {\n        toast.success(res.mesaj);\n        dispatch(setModalVisibility(LOGIN_MODAL, true));\n      } else toast.warn(res.mesaj);\n    })[\"catch\"](function (err) {\n      return toast.warn(err);\n    });\n  };\n};\nexport var LOGOUT = \"LOGOUT\";\nexport var logout = function logout() {\n  return function (dispatch) {\n    localStorage.removeItem(\"token\");\n    cookie.remove(\"token\");\n    dispatch(deauthenticate());\n  };\n};\nexport var changeImage = image = function (_image) {\n  function image(_x, _x2, _x3) {\n    return _image.apply(this, arguments);\n  }\n\n  image.toString = function () {\n    return _image.toString();\n  };\n\n  return image;\n}(function (dispatch, getState, http) {\n  if (!image) return false;\n  var formData = new FormData();\n  formData.append(\"resim\", image);\n  return http.post(\"profil_duzenle.php\", formData).then(function (res) {\n    return res.data;\n  }).then(function (res) {\n    if (res.durum) {\n      localStorage.setItem(\"token\", res.token);\n      cookie.set(\"token\", res.token, {\n        expires: 1\n      });\n      var data = jwt_decode(res.token);\n      dispatch(authenticate(data.data));\n    } else {\n      toast.warn(res.mesaj);\n    }\n  });\n});","map":{"version":3,"sources":["E:/projects/nosbir-frontend/store/actions/authActions.js"],"names":["toast","cookie","jwt_decode","setModalVisibility","LOGIN_MODAL","AUTHENTICATE","authenticate","user","type","DEAUTHENTICATE","deauthenticate","login","nick","passwd","dispatch","getState","http","post","kadi","sifre","then","res","data","console","log","durum","localStorage","setItem","token","set","expires","warn","mesaj","err","register","email","eposta","success","LOGOUT","logout","removeItem","remove","changeImage","image","formData","FormData","append"],"mappings":"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","sourcesContent":["import { toast } from \"react-toastify\";\r\nimport cookie from \"js-cookie\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { setModalVisibility, LOGIN_MODAL } from \"./modalActions\";\r\nexport const AUTHENTICATE = \"AUTHENTICATE\";\r\nexport const authenticate = user => ({ type: AUTHENTICATE, user });\r\nexport const DEAUTHENTICATE = \"DEAUTHENTICATE\";\r\nexport const deauthenticate = () => ({ type: DEAUTHENTICATE });\r\n\r\nexport const login = (nick, passwd) => {\r\n  if (!nick || !passwd) return;\r\n\r\n  return (dispatch, getState, http) => {\r\n    http\r\n      .post(\"giris.php\", {\r\n        kadi: nick,\r\n        sifre: passwd\r\n      })\r\n      .then(res => res.data)\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.durum) {\r\n          localStorage.setItem(\"token\", res.token);\r\n          cookie.set(\"token\", res.token, { expires: 1 });\r\n          const data = jwt_decode(res.token);\r\n          dispatch(authenticate(data.data));\r\n          dispatch(setModalVisibility(LOGIN_MODAL, false));\r\n        } else {\r\n          toast.warn(res.mesaj);\r\n        }\r\n      })\r\n      .catch(err => toast.warn(err));\r\n  };\r\n};\r\n\r\nexport const register = (nick, passwd, email) => {\r\n  if (!nick || !passwd || !email) return;\r\n\r\n  return (dispatch, getState, http) => {\r\n    http\r\n      .post(\"kayit.php\", {\r\n        kadi: nick,\r\n        sifre: passwd,\r\n        eposta: email\r\n      })\r\n      .then(res => res.data)\r\n      .then(res => {\r\n        if (res.durum) {\r\n          toast.success(res.mesaj);\r\n          dispatch(setModalVisibility(LOGIN_MODAL, true));\r\n        } else toast.warn(res.mesaj);\r\n      })\r\n      .catch(err => toast.warn(err));\r\n  };\r\n};\r\nexport const LOGOUT = \"LOGOUT\";\r\nexport const logout = () => dispatch => {\r\n  localStorage.removeItem(\"token\");\r\n  cookie.remove(\"token\");\r\n  dispatch(deauthenticate());\r\n};\r\n\r\nexport const changeImage = image = (dispatch, getState, http) => {\r\n  if (!image) return false;\r\n\r\n  var formData = new FormData();\r\n  formData.append(\"resim\", image);\r\n  return http\r\n    .post(\"profil_duzenle.php\", formData)\r\n    .then(res => res.data)\r\n    .then(res => {\r\n      if (res.durum) {\r\n        localStorage.setItem(\"token\", res.token);\r\n        cookie.set(\"token\", res.token, { expires: 1 });\r\n        const data = jwt_decode(res.token);\r\n        dispatch(authenticate(data.data));\r\n      } else {\r\n        toast.warn(res.mesaj);\r\n      }\r\n    });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}