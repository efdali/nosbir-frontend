{"ast":null,"code":"import { toast } from \"react-toastify\";\nimport cookie from \"js-cookie\";\nimport jwt_decode from \"jwt-decode\";\nimport { setModalVisibility, LOGIN_MODAL } from \"./modalActions\";\nexport var AUTHENTICATE = \"AUTHENTICATE\";\nexport var authenticate = function authenticate(user) {\n  return {\n    type: AUTHENTICATE,\n    user: user\n  };\n};\nexport var DEAUTHENTICATE = \"DEAUTHENTICATE\";\nexport var deauthenticate = function deauthenticate() {\n  return {\n    type: DEAUTHENTICATE\n  };\n};\nexport var login = function login(nick, passwd) {\n  if (!nick || !passwd) return;\n  return function (dispatch, getState, http) {\n    http.post(\"giris.php\", {\n      kadi: nick,\n      sifre: passwd\n    }).then(function (res) {\n      return res.data;\n    }).then(function (res) {\n      if (res.durum) {\n        localStorage.setItem(\"token\", res.token);\n        cookie.set(\"token\", res.token, {\n          expires: 1\n        });\n        var data = jwt_decode(res.token);\n        dispatch(authenticate(data.data));\n        dispatch(setModalVisibility(LOGIN_MODAL, false));\n      } else {\n        toast.warn(res.mesaj);\n      }\n    })[\"catch\"](function (err) {\n      return toast.warn(err);\n    });\n  };\n};\nexport var register = function register(nick, passwd, email) {\n  if (!nick || !passwd || !email) return;\n  return function (dispatch, getState, http) {\n    http.post(\"kayit.php\", {\n      kadi: nick,\n      sifre: passwd,\n      eposta: email\n    }).then(function (res) {\n      return res.data;\n    }).then(function (res) {\n      if (res.durum) {\n        toast.success(res.mesaj);\n        dispatch(setModalVisibility(LOGIN_MODAL, true));\n      } else toast.warn(res.mesaj);\n    })[\"catch\"](function (err) {\n      return toast.warn(err);\n    });\n  };\n};\nexport var LOGOUT = \"LOGOUT\";\nexport var logout = function logout() {\n  return function (dispatch) {\n    localStorage.removeItem(\"token\");\n    cookie.remove(\"token\");\n    dispatch(deauthenticate());\n  };\n};","map":{"version":3,"sources":["E:/projects/nosbir-frontend/store/actions/authActions.js"],"names":["toast","cookie","jwt_decode","setModalVisibility","LOGIN_MODAL","AUTHENTICATE","authenticate","user","type","DEAUTHENTICATE","deauthenticate","login","nick","passwd","dispatch","getState","http","post","kadi","sifre","then","res","data","durum","localStorage","setItem","token","set","expires","warn","mesaj","err","register","email","eposta","success","LOGOUT","logout","removeItem","remove"],"mappings":"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","sourcesContent":["import { toast } from \"react-toastify\";\r\nimport cookie from \"js-cookie\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { setModalVisibility, LOGIN_MODAL } from \"./modalActions\";\r\nexport const AUTHENTICATE = \"AUTHENTICATE\";\r\nexport const authenticate = user => ({ type: AUTHENTICATE, user });\r\nexport const DEAUTHENTICATE = \"DEAUTHENTICATE\";\r\nexport const deauthenticate = () => ({ type: DEAUTHENTICATE });\r\n\r\nexport const login = (nick, passwd) => {\r\n  if (!nick || !passwd) return;\r\n\r\n  return (dispatch, getState, http) => {\r\n    http\r\n      .post(\"giris.php\", {\r\n        kadi: nick,\r\n        sifre: passwd\r\n      })\r\n      .then(res => res.data)\r\n      .then(res => {\r\n        if (res.durum) {\r\n          localStorage.setItem(\"token\", res.token);\r\n          cookie.set(\"token\", res.token, { expires: 1 });\r\n          const data = jwt_decode(res.token);\r\n          dispatch(authenticate(data.data));\r\n          dispatch(setModalVisibility(LOGIN_MODAL, false));\r\n        } else {\r\n          toast.warn(res.mesaj);\r\n        }\r\n      })\r\n      .catch(err => toast.warn(err));\r\n  };\r\n};\r\n\r\nexport const register = (nick, passwd, email) => {\r\n  if (!nick || !passwd || !email) return;\r\n\r\n  return (dispatch, getState, http) => {\r\n    http\r\n      .post(\"kayit.php\", {\r\n        kadi: nick,\r\n        sifre: passwd,\r\n        eposta: email\r\n      })\r\n      .then(res => res.data)\r\n      .then(res => {\r\n        if (res.durum) {\r\n          toast.success(res.mesaj);\r\n          dispatch(setModalVisibility(LOGIN_MODAL, true));\r\n        } else toast.warn(res.mesaj);\r\n      })\r\n      .catch(err => toast.warn(err));\r\n  };\r\n};\r\nexport const LOGOUT = \"LOGOUT\";\r\nexport const logout = () => dispatch => {\r\n  localStorage.removeItem(\"token\");\r\n  cookie.remove(\"token\");\r\n  dispatch(deauthenticate());\r\n};\r\n"]},"metadata":{},"sourceType":"module"}