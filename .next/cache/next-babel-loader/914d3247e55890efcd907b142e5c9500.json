{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport { withAuth } from \"../utils/auth\";\nimport http from \"../utils/http\";\nimport Loading from \"../components/loading\";\n\nfunction Notifications(_ref) {\n  var data = _ref.data;\n\n  var _useState = useState(data),\n      notifications = _useState[0],\n      setNotifications = _useState[1];\n\n  var _useState2 = useState(false),\n      isLoading = _useState2[0],\n      setLoading = _useState2[1];\n\n  useEffect(function () {\n    if (!data) {\n      setLoading(true);\n      http.get(\"bildirimler.php\", {\n        params: {\n          howMany: \"all\"\n        }\n      }).then(function (res) {\n        return setNotifications(res.data.bildirimler);\n      }).then(function () {\n        return setLoading(false);\n      })[\"catch\"](function (err) {\n        return setLoading(false);\n      });\n    }\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"Bildirimlerim\")), __jsx(\"div\", {\n    className: \"content\"\n  }, isLoading && __jsx(Loading, null), notifications.length > 0 && !isLoading && __jsx(\"ul\", null, notifications.map(function (n, i) {\n    return __jsx(\"li\", {\n      key: i\n    }, __jsx(Link, {\n      href: \"/\".concat(n.link)\n    }, __jsx(\"a\", null, n.content)));\n  }))));\n}\n\nNotifications.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(ctx) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", {\n              data: []\n            });\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default withAuth(Notifications);","map":{"version":3,"sources":["E:/projects/nosbir-frontend/pages/notifications.js"],"names":["React","useEffect","useState","Head","Link","withAuth","http","Loading","Notifications","data","notifications","setNotifications","isLoading","setLoading","get","params","howMany","then","res","bildirimler","err","length","map","n","i","link","content","getInitialProps","ctx"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,QAAT,QAAyB,eAAzB;AACA,OAAOC,IAAP,MAAiB,eAAjB;AACA,OAAOC,OAAP,MAAoB,uBAApB;;AACA,SAASC,aAAT,OAAiC;AAAA,MAARC,IAAQ,QAARA,IAAQ;;AAAA,kBACWP,QAAQ,CAACO,IAAD,CADnB;AAAA,MACxBC,aADwB;AAAA,MACTC,gBADS;;AAAA,mBAECT,QAAQ,CAAC,KAAD,CAFT;AAAA,MAExBU,SAFwB;AAAA,MAEbC,UAFa;;AAG/BZ,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAACQ,IAAL,EAAW;AACTI,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAP,MAAAA,IAAI,CACDQ,GADH,CACO,iBADP,EAC0B;AAAEC,QAAAA,MAAM,EAAE;AAAEC,UAAAA,OAAO,EAAE;AAAX;AAAV,OAD1B,EAEGC,IAFH,CAEQ,UAAAC,GAAG;AAAA,eAAIP,gBAAgB,CAACO,GAAG,CAACT,IAAJ,CAASU,WAAV,CAApB;AAAA,OAFX,EAGGF,IAHH,CAGQ;AAAA,eAAMJ,UAAU,CAAC,KAAD,CAAhB;AAAA,OAHR,WAIS,UAAAO,GAAG;AAAA,eAAIP,UAAU,CAAC,KAAD,CAAd;AAAA,OAJZ;AAKD;AACF,GATQ,EASN,EATM,CAAT;AAUA,SACE,4BACE,MAAC,IAAD,QACE,qCADF,CADF,EAIE;AAAK,IAAA,SAAS,EAAC;AAAf,KACGD,SAAS,IAAI,MAAC,OAAD,OADhB,EAEGF,aAAa,CAACW,MAAd,GAAuB,CAAvB,IAA4B,CAACT,SAA7B,IACC,kBACGF,aAAa,CAACY,GAAd,CAAkB,UAACC,CAAD,EAAIC,CAAJ;AAAA,WACjB;AAAI,MAAA,GAAG,EAAEA;AAAT,OACE,MAAC,IAAD;AAAM,MAAA,IAAI,aAAMD,CAAC,CAACE,IAAR;AAAV,OACE,iBAAIF,CAAC,CAACG,OAAN,CADF,CADF,CADiB;AAAA,GAAlB,CADH,CAHJ,CAJF,CADF;AAqBD;;AACDlB,aAAa,CAACmB,eAAd;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAgC,iBAAMC,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA,6CASvB;AACLnB,cAAAA,IAAI,EAAE;AADD,aATuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhC;;AAAA;AAAA;AAAA;AAAA;;AAaA,eAAeJ,QAAQ,CAACG,aAAD,CAAvB","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Head from \"next/head\";\r\nimport Link from \"next/link\";\r\nimport { withAuth } from \"../utils/auth\";\r\nimport http from \"../utils/http\";\r\nimport Loading from \"../components/loading\";\r\nfunction Notifications({ data }) {\r\n  const [notifications, setNotifications] = useState(data);\r\n  const [isLoading, setLoading] = useState(false);\r\n  useEffect(() => {\r\n    if (!data) {\r\n      setLoading(true);\r\n      http\r\n        .get(\"bildirimler.php\", { params: { howMany: \"all\" } })\r\n        .then(res => setNotifications(res.data.bildirimler))\r\n        .then(() => setLoading(false))\r\n        .catch(err => setLoading(false));\r\n    }\r\n  }, []);\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Bildirimlerim</title>\r\n      </Head>\r\n      <div className=\"content\">\r\n        {isLoading && <Loading />}\r\n        {notifications.length > 0 && !isLoading && (\r\n          <ul>\r\n            {notifications.map((n, i) => (\r\n              <li key={i}>\r\n                <Link href={`/${n.link}`}>\r\n                  <a>{n.content}</a>\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\nNotifications.getInitialProps = async ctx => {\r\n  /*const data = await http\r\n    .get(\"bildirimler.php\", {\r\n      params: {\r\n        howMany: \"all\"\r\n      }\r\n    })\r\n    .then(res => res.data.bildirimler);*/\r\n\r\n  return {\r\n    data: []\r\n  };\r\n};\r\nexport default withAuth(Notifications);\r\n"]},"metadata":{},"sourceType":"module"}