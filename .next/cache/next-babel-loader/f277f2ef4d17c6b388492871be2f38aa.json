{"ast":null,"code":"import _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport Link from 'next/link';\nimport { toast } from \"react-toastify\";\nimport { useSelector } from \"react-redux\";\nimport http from \"../utils/http\";\nimport Loading from \"./loading\";\n\nvar Vote = function Vote(props) {\n  var _useSelector = useSelector(function (state) {\n    return state.auth;\n  }),\n      isAuthenticated = _useSelector.isAuthenticated;\n\n  var _useState = useState(_parseInt(props.likes ? props.likes : 0)),\n      like = _useState[0],\n      setLike = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  function voteHandler(e, type) {\n    e.preventDefault();\n    setLoading(true);\n\n    if (!isAuthenticated) {\n      toast.warn(\"Oylamak için giriş yapmalısınız.\");\n      setLoading(false);\n      return;\n    }\n\n    http.post(\"begeni.php\", {\n      postId: props.postId,\n      tur: type\n    }).then(function (res) {\n      return res.data;\n    }).then(function (res) {\n      if (res.durum) {\n        if (res.begeni) setLike(begeni);else setLike(like + _parseInt(type));\n      } else toast.error(res.mesaj);\n\n      setLoading(false);\n    })[\"catch\"](function (err) {\n      setLoading(false);\n      toast.error(\"Bir hata oluştu. \" + err);\n    });\n  }\n\n  var Icon = function Icon(_ref) {\n    var type = _ref.type;\n    return __jsx(\"img\", {\n      src: \"/vote-\".concat(type).concat(props.white ? \"-white\" : \"\", \"-icon.png\"),\n      alt: \"post oyla\"\n    });\n  };\n\n  var defaultClass = props.white ? \"default-btn\" : \"\";\n  return __jsx(\"ul\", {\n    className: \"post-actions\"\n  }, __jsx(\"li\", {\n    className: \"post-vote\"\n  }, __jsx(\"button\", {\n    className: defaultClass,\n    onClick: function onClick(e) {\n      return voteHandler(e, 1);\n    }\n  }, __jsx(Icon, {\n    type: \"up\"\n  })), loading ? __jsx(Loading, null) : __jsx(\"span\", null, like), __jsx(\"button\", {\n    className: defaultClass,\n    onClick: function onClick(e) {\n      return voteHandler(e, -1);\n    }\n  }, __jsx(Icon, {\n    type: \"down\"\n  }))), __jsx(\"li\", {\n    className: \"post-comment-number\"\n  }, __jsx(\"img\", {\n    src: \"/comment\".concat(props.white ? \"-white\" : \"\", \"-icon.png\"),\n    alt: \"post-yorumlar\\u0131\"\n  }), __jsx(Link, {\n    href: \"/nos/\".concat(props.seo)\n  }, __jsx(\"a\", null, props.total ? props.total : 0))));\n};\n\nexport default Vote;","map":{"version":3,"sources":["E:/projects/nosbir-frontend/components/vote.js"],"names":["React","useState","Link","toast","useSelector","http","Loading","Vote","props","state","auth","isAuthenticated","likes","like","setLike","loading","setLoading","voteHandler","e","type","preventDefault","warn","post","postId","tur","then","res","data","durum","begeni","error","mesaj","err","Icon","white","defaultClass","seo","total"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Link from 'next/link';\r\nimport { toast } from \"react-toastify\";\r\nimport { useSelector } from \"react-redux\";\r\nimport http from \"../utils/http\";\r\nimport Loading from \"./loading\";\r\nconst Vote = props => {\r\n  const { isAuthenticated } = useSelector(state => state.auth);\r\n  const [like, setLike] = useState(parseInt(props.likes ? props.likes : 0));\r\n  const [loading, setLoading] = useState(false);\r\n  function voteHandler(e, type) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    if (!isAuthenticated) {\r\n      toast.warn(\"Oylamak için giriş yapmalısınız.\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    http\r\n      .post(\"begeni.php\", {\r\n        postId: props.postId,\r\n        tur: type\r\n      })\r\n      .then(res => res.data)\r\n      .then(res => {\r\n        if (res.durum) {\r\n          if (res.begeni) setLike(begeni);\r\n          else setLike(like + parseInt(type));\r\n        } else toast.error(res.mesaj);\r\n        setLoading(false);\r\n      })\r\n      .catch(err => {\r\n        setLoading(false);\r\n        toast.error(\"Bir hata oluştu. \" + err);\r\n      });\r\n  }\r\n  const Icon = ({ type }) => {\r\n    return (\r\n      <img\r\n        src={`/vote-${type}${props.white ? \"-white\" : \"\"}-icon.png`}\r\n        alt=\"post oyla\"\r\n      />\r\n    );\r\n  };\r\n  const defaultClass = props.white ? \"default-btn\" : \"\";\r\n  return (\r\n    <ul className=\"post-actions\">\r\n      <li className=\"post-vote\">\r\n        <button className={defaultClass} onClick={e => voteHandler(e, 1)}>\r\n          <Icon type=\"up\" />\r\n        </button>\r\n        {loading ? <Loading /> : <span>{like}</span>}\r\n        <button className={defaultClass} onClick={e => voteHandler(e, -1)}>\r\n          <Icon type=\"down\" />\r\n        </button>\r\n      </li>\r\n      <li className=\"post-comment-number\">\r\n        <img\r\n          src={`/comment${props.white ? `-white` : \"\"}-icon.png`}\r\n          alt=\"post-yorumları\"\r\n        />\r\n        <Link href={`/nos/${props.seo}`}>\r\n          <a>{props.total ? props.total : 0}</a>\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\nexport default Vote;\r\n"]},"metadata":{},"sourceType":"module"}