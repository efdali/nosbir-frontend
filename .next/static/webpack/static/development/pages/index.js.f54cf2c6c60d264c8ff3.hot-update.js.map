{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.f54cf2c6c60d264c8ff3.hot-update.js","sources":["webpack:///./components/postList.js"],"sourcesContent":["import React from \"react\";\r\nimport Post from \"./post\";\r\nimport Loading from \"./loading\";\r\nimport Error from \"./error\";\r\nimport { connect } from \"react-redux\";\r\nimport { fetchPosts } from \"../store/actions/postActions\";\r\nclass PostList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      page: 0\r\n    };\r\n  }\r\n\r\n  onScrollHandle = e => {\r\n    // inner görünen alan\r\n    // scrollTop ne kadar aşağıda olduğu\r\n    // offsetHeight sayfanın toplam yüksekliği\r\n    const { total, group, fetchPosts } = this.props;\r\n    if (this.state.page < total - 1) {\r\n      if (\r\n        window.innerHeight + document.documentElement.scrollTop + 200 >=\r\n        document.documentElement.offsetHeight\r\n      ) {\r\n        this.setState(\r\n          oldState => ({\r\n            page: oldState.page + 1\r\n          }),\r\n          () => {\r\n            fetchPosts(group, this.state.page);\r\n          }\r\n        );\r\n      }\r\n    } else window.removeEventListener(\"scroll\", this.onScrollHandle);\r\n  };\r\n  componentDidMount() {\r\n    if (this.props.posts.length <= 0)\r\n      this.props.fetchPosts(this.props.group, this.state.page);\r\n\r\n    window.addEventListener(\"scroll\", this.onScrollHandle);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(scroll, this.onScrollHandle);\r\n  }\r\n\r\n  render() {\r\n    const { posts, isLoading, isRejected, msg, total } = this.props;\r\n\r\n    if (isLoading) return <Loading />;\r\n    else if (isRejected) return <Error msg={msg} />;\r\n    else if (!posts.length) return <Error msg=\"Post Bulunamadı.\" />;\r\n\r\n    return (\r\n      <div className=\"post-list\">\r\n        {posts.map((p, i) => (\r\n          <Post post={p} key={i} />\r\n        ))}\r\n        {this.state.page !== 0 && this.state.page >= total - 1 ? (\r\n          <Error msg=\"Bütün postlar bu kadardı.Hepsini gördün.\" />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = ({ posts }) => ({\r\n  posts: posts.posts,\r\n  isLoading: posts.post_loading,\r\n  isRejected: posts.post_reject,\r\n  msg: posts.post_error_msg,\r\n  total: posts.total\r\n});\r\nexport default connect(mapStateToProps, { fetchPosts })(PostList);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAQA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AAIA;AACA;AACA;AADA;AAAA;AAIA;AACA;AAEA;AACA;AACA;AACA;AA1BA;AACA;AADA;AAFA;AAKA;AACA;;;AAsBA;AACA;AAGA;AACA;;;AACA;AACA;AACA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AADA;AAIA;AAAA;AAMA;;;;AA1DA;AACA;AA2DA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;AACA;AAMA;AAAA;AAAA;;;;A","sourceRoot":""}