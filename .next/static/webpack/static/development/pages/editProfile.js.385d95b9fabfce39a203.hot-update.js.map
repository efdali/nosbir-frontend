{"version":3,"file":"static/webpack/static\\development\\pages\\editProfile.js.385d95b9fabfce39a203.hot-update.js","sources":["webpack:///./pages/editProfile.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport Head from \"next/head\";\r\nimport { withAuth } from \"../utils/auth\";\r\nimport http from \"../utils/http\";\r\nimport UserContainer from \"../components/userContainer\";\r\nimport Image from \"../components/image\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { changeImage, logout } from \"../store/actions/authActions\";\r\nimport { toast } from \"react-toastify\";\r\nimport Loading from \"../components/loading\";\r\nfunction EditProfile() {\r\n  const user = useSelector(state => state.auth.user);\r\n  const dispatch = useDispatch();\r\n  const [image, setImage] = useState();\r\n  const [without, setWithout] = useState(false);\r\n  const [picture, setPicture] = useState(user.resim);\r\n  const [isLoading, setLoading] = useState(false);\r\n  const [oldPasswd, setOldPasswd] = useState(\"\");\r\n  const [newPasswd, setNewPasswd] = useState(\"\");\r\n  const [newPasswdAgain, setNewPasswdAgain] = useState(\"\");\r\n  const changeImageHandler = e => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    if (!image) return false;\r\n    const result = dispatch(changeImage(image));\r\n    result.then(res => {\r\n      if (res) {\r\n        toast.success(\"resim başarıyla değişti\");\r\n      } else {\r\n        toast.error(\"Opps bir hata oluştu\");\r\n      }\r\n      setLoading(false);\r\n    });\r\n  };\r\n  const onImageChange = e => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      setImage(e.target.files[0]);\r\n      let reader = new FileReader();\r\n      reader.onload = event => {\r\n        setPicture(event.target.result);\r\n        setWithout(true);\r\n      };\r\n      reader.readAsDataURL(e.target.files[0]);\r\n    }\r\n  };\r\n\r\n  const passwdChangeHandler = e => {\r\n    e.preventDefault();\r\n\r\n    if (!oldPasswd || !newPasswd || !newPasswdAgain) {\r\n      return false;\r\n    }\r\n\r\n    if (newPasswd !== newPasswdAgain) {\r\n      toast.error(\"şifreler eşleşmiyor\");\r\n      return false;\r\n    }\r\n\r\n    http\r\n      .post(\"profil_dsifre.php\", {\r\n        eskiSifre: oldPasswd,\r\n        yeniSifre: newPasswd\r\n      })\r\n      .then(res => res.data)\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.durum) {\r\n          toast.success(\"şifre değiştirme başarılı. tekrar giriş yapın\");\r\n          setInterval(() => {\r\n            dispatch(logout());\r\n          }, 1000);\r\n        } else {\r\n          toast.error(\"Opps bir hata oluştu\");\r\n        }\r\n      });\r\n  };\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Profil Düzenle</title>\r\n      </Head>\r\n      <div className=\"content\">\r\n        <div className=\"header\">\r\n          <h4>profil düzenle</h4>\r\n        </div>\r\n        <div className=\"form-wrapper\">\r\n          <div className=\"picture-form form-box\">\r\n            <form onSubmit={changeImageHandler}>\r\n              <Image\r\n                src={picture}\r\n                alt={user.kadi}\r\n                withoutUrl={without}\r\n                className=\"user-img\"\r\n              />\r\n              <label className=\"picture-label\">\r\n                yeni resim seç\r\n                <input\r\n                  type=\"file\"\r\n                  className=\"picture-btn\"\r\n                  onChange={onImageChange}\r\n                />\r\n              </label>\r\n              {!isLoading ? (\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"form-save-btn\"\r\n                  onClick={changeImageHandler}\r\n                  disabled={isLoading ? true : false}\r\n                >\r\n                  kaydet\r\n                </button>\r\n              ) : (\r\n                <Loading />\r\n              )}\r\n            </form>\r\n          </div>\r\n          <div className=\"nick-form form-box\">\r\n            <form>\r\n              <input\r\n                className=\"default-input\"\r\n                type=\"text\"\r\n                placeholder=\"yeni kullanıcı adı\"\r\n                readOnly\r\n              />\r\n              <button\r\n                type=\"submit\"\r\n                className=\"form-save-btn disabled\"\r\n                disabled\r\n                title=\"kullanıcı adı değiştirilemez.\"\r\n              >\r\n                kaydet\r\n              </button>\r\n            </form>\r\n          </div>\r\n          <div className=\"mail-form form-box\">\r\n            <form>\r\n              <input\r\n                type=\"mail\"\r\n                className=\"default-input\"\r\n                placeholder=\"yeni mail gir\"\r\n                readOnly\r\n              />\r\n              <button\r\n                type=\"submit\"\r\n                className=\"form-save-btn disabled\"\r\n                disabled\r\n                title=\"mail adresi değiştirme hakkınız yok\"\r\n              >\r\n                kaydet\r\n              </button>\r\n            </form>\r\n          </div>\r\n          <div className=\"passwd-form form-box\">\r\n            <form onSubmit={passwdChangeHandler}>\r\n              <input\r\n                type=\"password\"\r\n                className=\"default-input\"\r\n                placeholder=\"yeni şifre\"\r\n                value={newPasswd}\r\n                onChange={e => setNewPasswd(e.target.value)}\r\n              />\r\n              <input\r\n                type=\"password\"\r\n                className=\"default-input\"\r\n                placeholder=\"yeni şifre tekrar\"\r\n                value={newPasswdAgain}\r\n                onChange={e => setNewPasswdAgain(e.target.value)}\r\n              />\r\n              <input\r\n                type=\"password\"\r\n                className=\"default-input old-passwd\"\r\n                placeholder=\"mevcut şifre\"\r\n                value={oldPasswd}\r\n                onChange={e => setOldPasswd(e.target.value)}\r\n              />\r\n              {isLoading ? (\r\n                <Loading />\r\n              ) : (\r\n                <button\r\n                  className=\"form-save-btn\"\r\n                  onClick={passwdChangeHandler}\r\n                  disabled={isLoading ? true : false}\r\n                >\r\n                  kaydet\r\n                </button>\r\n              )}\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <aside className=\"right-sidebar user-sidebar\">\r\n        <UserContainer nick={user.kadi} picture={user.resim} userId={user.id} />\r\n        <h1>Right side</h1>\r\n      </aside>\r\n      <style jsx>\r\n        {`\r\n          .content {\r\n            flex: 1;\r\n            background-color: var(--main-dark-gray-color);\r\n            color: #fff;\r\n          }\r\n          .header {\r\n            width: 100%;\r\n            height: 40px;\r\n            border-bottom: 1px solid var(--main-gray-color);\r\n          }\r\n          .header h4 {\r\n            font-size: var(--big-font-size);\r\n            height: 40px;\r\n            line-height: 39px;\r\n            margin-left: 15px;\r\n            font-family: Tekton-pro, sans-serif;\r\n            font-weight: bold;\r\n          }\r\n          .form-wrapper {\r\n            margin-top: 50px;\r\n            padding-bottom: 50px;\r\n          }\r\n          .form-box {\r\n            width: 80%;\r\n            margin: 0 auto;\r\n            margin-top: 45px;\r\n            background: var(--main-gray-color);\r\n            height: 60px;\r\n            position: relative;\r\n          }\r\n          .form-box form {\r\n            width: 100%;\r\n            height: 60px;\r\n            display: flex;\r\n            align-items: center;\r\n          }\r\n          :global(.form-box .user-img) {\r\n            width: 90px;\r\n            height: 90px;\r\n            border-radius: 50%;\r\n            position: relative;\r\n            left: -30px;\r\n          }\r\n          .picture-btn {\r\n            display: none;\r\n          }\r\n          .picture-label {\r\n            border: 1px solid #000;\r\n            padding: 4px 12px;\r\n            background-color: #000;\r\n            cursor: pointer;\r\n          }\r\n          .form-box input {\r\n            margin: 0 0 0 15px;\r\n            width: 40%;\r\n            padding: 4px;\r\n          }\r\n          .old-passwd {\r\n            margin-right: 15px !important;\r\n          }\r\n          button.form-save-btn {\r\n            margin-left: auto;\r\n            background-color: var(--main-red-color);\r\n            border: none;\r\n            outline: none;\r\n            padding: 8px 22px;\r\n            font-size: var(--small-font-size);\r\n            color: #fff;\r\n            margin-right: 10px;\r\n            cursor: pointer;\r\n          }\r\n          button.form-save-btn.disabled {\r\n            cursor: no-drop;\r\n            background-color: #000;\r\n          }\r\n          :global(.loading-container) {\r\n            margin-left: auto;\r\n            margin-right: 25px;\r\n          }\r\n          :global(.loading-container img) {\r\n            margin-top: 0 !important;\r\n          }\r\n          @media (max-width: 1320px) {\r\n            .passwd-form {\r\n              height: 120px;\r\n            }\r\n            .passwd-form form {\r\n              flex-wrap: wrap;\r\n              height: 120px;\r\n            }\r\n            .passwd-form button {\r\n              margin: 0;\r\n            }\r\n            .picture-label {\r\n              margin-left: -15px;\r\n            }\r\n          }\r\n        `}\r\n      </style>\r\n    </>\r\n  );\r\n}\r\nexport default withAuth(EditProfile, true);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAHA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAFA;AAIA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAGA;AAEA;AAHA;AAAA;AAQA;AAEA;AACA;AAJA;AAAA;AAaA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AAJA;AAAA;AAOA;AAEA;AACA;AAJA;AAAA;AAUA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AAJA;AAAA;AAOA;AAEA;AACA;AAJA;AAAA;AAUA;AAAA;AACA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AALA;AAAA;AAQA;AAEA;AACA;AACA;AAAA;AAAA;AALA;AAAA;AAQA;AAEA;AACA;AACA;AAAA;AAAA;AALA;AAAA;AAYA;AACA;AAHA;AAAA;AAYA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAnHA;AAAA;AA4NA;AACA;AAAA;;;;A","sourceRoot":""}